<div class="dashboard-container">
    <div class="header">
        <h1>Tablero</h1>
        <app-help-icon
            message="Bienvenido al Panel de Control. Aquí puedes ver un resumen de las estadísticas clave de la escuela y la actividad reciente."></app-help-icon>
    </div>

    <div class="stats-grid" *ngIf="stats">
        <mat-card class="stat-card">
            <mat-card-content>
                <div class="stat-icon blue">
                    <mat-icon>people</mat-icon>
                </div>
                <div class="stat-info">
                    <span class="stat-value">{{ stats.totalStudents }}</span>
                    <span class="stat-label">Total Estudiantes</span>
                </div>
            </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
            <mat-card-content>
                <div class="stat-icon green">
                    <mat-icon>class</mat-icon>
                </div>
                <div class="stat-info">
                    <span class="stat-value">{{ stats.totalGroups }}</span>
                    <span class="stat-label">Grupos</span>
                </div>
            </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
            <mat-card-content>
                <div class="stat-icon orange">
                    <mat-icon>library_books</mat-icon>
                </div>
                <div class="stat-info">
                    <span class="stat-value">{{ stats.totalSubjects }}</span>
                    <span class="stat-label">Materias</span>
                </div>
            </mat-card-content>
        </mat-card>

        <mat-card class="stat-card">
            <mat-card-content>
                <div class="stat-icon purple">
                    <mat-icon>date_range</mat-icon>
                </div>
                <div class="stat-info">
                    <span class="stat-value">{{ stats.activePeriods }}</span>
                    <span class="stat-label">Periodo Activo</span>
                </div>
            </mat-card-content>
        </mat-card>
    </div>

    <div class="dashboard-content">
        <mat-card class="activity-card">
            <mat-card-header>
                <mat-card-title>Actividad Reciente</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <mat-list>
                    <mat-list-item *ngFor="let activity of activities">
                        <mat-icon matListItemIcon [ngClass]="activity.type">
                            {{ activity.type === 'info' ? 'info' : (activity.type === 'success' ? 'check_circle' :
                            'warning') }}
                        </mat-icon>
                        <div matListItemTitle>{{ activity.description }}</div>
                        <div matListItemLine>{{ activity.date | date:'medium' }}</div>
                    </mat-list-item>
                </mat-list>
            </mat-card-content>
        </mat-card>

        <mat-card class="welcome-card">
            <mat-card-header>
                <mat-card-title>Acciones Rápidas</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>Usa estos accesos directos para acceder rápidamente a tareas comunes.</p>
                <div class="quick-actions">
                    <button mat-raised-button color="primary" routerLink="/students/new">Registrar Estudiante</button>
                    <button mat-stroked-button color="primary" routerLink="/evaluations/attendance">Marcar
                        Asistencia</button>
                    <button mat-stroked-button color="accent" routerLink="/evaluations/grading">Ingresar
                        Calificaciones</button>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>